# SettlementAgent

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π settlement-–∞–¥—Ä–µ—Å —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤.

## üì¶ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –ø–ª–∞—Ç–µ–∂–µ–π, –±–∏–ª–ª–∏–Ω–≥–∞, custody/treasury —Ä–µ—à–µ–Ω–∏–π. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º —Å—Ä–µ–¥—Å—Ç–≤–∞–º –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–∏—è.

---

## üõ°Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–π

| –†–æ–ª—å           | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ |
|----------------|-------------|
| **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** (`ADMIN_ROLE`) | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (—á–µ—Ä–µ–∑ UUPS) |
| **–ì–ª–∞–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä** (`isLeadManager`) | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ settlement-–∞–¥—Ä–µ—Å–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä** (`MANAGER_ROLE`) | –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤ |

---

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

- `allowLimit()` ‚Äî –∫–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–∏–º–∏—Ç (–Ω–∞ –æ—Å–Ω–æ–≤–µ ERC20 `approve`)
- `setTimeLimits()` ‚Äî –∫–ª–∏–µ–Ω—Ç –∑–∞–¥–∞—ë—Ç –ª–∏–º–∏—Ç—ã –ø–æ 10 –º–∏–Ω—É—Ç –∏ 24 —á–∞—Å–∞–º
- `withdrawFromClient()` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ settlement-–∞–¥—Ä–µ—Å
- `proposeManager()` / `confirmManager()` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
- `removeManager()` ‚Äî –≥–ª–∞–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–ª–∏ pending-–º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `settlementAddress()` ‚Äî —Ç–µ–∫—É—â–∏–π –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–ø–∏—Å–∞–Ω–∏–π

---

## ‚è≥ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Å–ø–∏—Å–∞–Ω–∏–π:
  - –ó–∞ 10 –º–∏–Ω—É—Ç (`limit10min`)
  - –ó–∞ 24 —á–∞—Å–∞ (`limit24h`)
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ `TimeLimits`, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π

---

## üìú –ê—É–¥–∏—Ç –∏ –∂—É—Ä–Ω–∞–ª

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤–µ–¥—ë—Ç –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏:

- `managerChangeLog[]` —Ö—Ä–∞–Ω–∏—Ç —Å–æ–±—ã—Ç–∏—è `Added`, `Confirmed`, `Removed`
- –§—É–Ω–∫—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
  - `getManagerChangeLogByAction()`
  - `getManagerChangeLogByManager()`
  - `getManagerChangeLogByActor()`

---

## üöÄ –î–µ–ø–ª–æ–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```solidity
initialize(
  address token,
  address settlementAddress,
  address admin,
  address[] memory leadManagers
)
